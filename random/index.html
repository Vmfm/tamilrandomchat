<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ID Video Call</title>
<script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
<style>
body { background:#111; color:#fff; font-family:sans-serif; text-align:center }
video { width:45%; background:#000; margin:5px; border-radius:10px }
input,button { padding:10px; margin:5px; border-radius:6px }
</style>
</head>
<body>

<h2>Video / Audio Call</h2>

<div>
  <input id="myId" placeholder="Your ID">
  <button onclick="login()">Login</button>
</div>

<div>
  <input id="callId" placeholder="Friend ID">
  <button onclick="videoCall()">Video Call</button>
  <button onclick="audioCall()">Audio Call</button>
</div>

<p>Your ID: <span id="showId">-</span></p>

<video id="local" autoplay muted playsinline></video>
<video id="remote" autoplay playsinline></video>

<script>
let peer;
let localStream;

async function login() {
  const id = document.getElementById("myId").value;
  if(!id) return alert("Enter ID");

  peer = new Peer(id);

  peer.on("open", () => {
    document.getElementById("showId").innerText = id;
    alert("Logged in as " + id);
  });

  peer.on("call", call => {
    call.answer(localStream);
    call.on("stream", s => remote.srcObject = s);
  });
}

async function getMedia(video) {
  localStream = await navigator.mediaDevices.getUserMedia({
    video: video,
    audio: true
  });
  local.srcObject = localStream;
}

async function videoCall() {
  await getMedia(true);
  const id = callId.value;
  const call = peer.call(id, localStream);
  call.on("stream", s => remote.srcObject = s);
}

async function audioCall() {
  await getMedia(false);
  const id = callId.value;
  const call = peer.call(id, localStream);
  call.on("stream", s => remote.srcObject = s);
}
</script>

</body>
</html>
